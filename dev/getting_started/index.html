<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · Survey.jl</title><meta name="title" content="Getting Started · Survey.jl"/><meta property="og:title" content="Getting Started · Survey.jl"/><meta property="twitter:title" content="Getting Started · Survey.jl"/><meta name="description" content="Documentation for Survey.jl."/><meta property="og:description" content="Documentation for Survey.jl."/><meta property="twitter:description" content="Documentation for Survey.jl."/><meta property="og:url" content="https://xKDR.github.io/Survey.jl/getting_started/"/><meta property="twitter:url" content="https://xKDR.github.io/Survey.jl/getting_started/"/><link rel="canonical" href="https://xKDR.github.io/Survey.jl/getting_started/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Survey.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Getting Started</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Tutorial"><span>Tutorial</span></a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../man/dataframes/">DataFrames in Survey</a></li><li><a class="tocitem" href="../man/replicate/">Replicate weights</a></li><li><a class="tocitem" href="../man/plotting/">Plotting</a></li><li><a class="tocitem" href="../man/comparisons/">Comparison with other survey analysis tools</a></li><li><a class="tocitem" href="../man/glm/">Generalised linear models</a></li></ul></li><li><a class="tocitem" href="../api/">API reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/xKDR/Survey.jl/blob/main/docs/src/getting_started.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>The <code>Survey.jl</code> package is registered. Regular <code>Pkg</code> commands can be used for installing the package:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Pkg</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Pkg.add(&quot;Survey&quot;)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr32"><span class="sgr1">    Updating</span></span> registry at `~/.julia/registries/General.toml`
<span class="sgr32"><span class="sgr1">   Resolving</span></span> package versions...
<span class="sgr32"><span class="sgr1">   Installed</span></span> Survey ─ v0.2.0
<span class="sgr32"><span class="sgr1">    Updating</span></span> `~/work/Survey.jl/Survey.jl/docs/Project.toml`
  <span class="sgr90">[c1a98b4d] </span><span class="sgr93">~ Survey v0.3.0 `~/work/Survey.jl/Survey.jl` ⇒ v0.2.0</span>
<span class="sgr32"><span class="sgr1">    Updating</span></span> `~/work/Survey.jl/Survey.jl/docs/Manifest.toml`
  <span class="sgr90">[c1a98b4d] </span><span class="sgr93">~ Survey v0.3.0 `~/work/Survey.jl/Survey.jl` ⇒ v0.2.0</span>
<span class="sgr32"><span class="sgr1">Precompiling</span></span> project...
<span class="sgr32">  ✓ </span><span class="sgr90">UnPack</span>
<span class="sgr32">  ✓ </span><span class="sgr90">RangeArrays</span>
<span class="sgr32">  ✓ </span><span class="sgr90">PositiveFactorizations</span>
<span class="sgr32">  ✓ </span><span class="sgr90">PkgVersion</span>
<span class="sgr32">  ✓ </span><span class="sgr90">Grisu</span>
<span class="sgr32">  ✓ </span><span class="sgr90">MappedArrays</span>
<span class="sgr32">  ✓ </span><span class="sgr90">Inflate</span>
<span class="sgr32">  ✓ </span><span class="sgr90">ProgressMeter</span>
<span class="sgr32">  ✓ </span><span class="sgr90">CommonSubexpressions</span>
<span class="sgr32">  ✓ </span><span class="sgr90">DiffResults</span>
<span class="sgr32">  ✓ </span><span class="sgr90">SimpleTraits</span>
<span class="sgr32">  ✓ </span><span class="sgr90">StackViews</span>
<span class="sgr32">  ✓ </span><span class="sgr90">Imath_jll</span>
<span class="sgr32">  ✓ </span><span class="sgr90">PaddedViews</span>
<span class="sgr32">  ✓ </span><span class="sgr90">LLVMOpenMP_jll</span>
<span class="sgr32">  ✓ </span><span class="sgr90">IntelOpenMP_jll</span>
<span class="sgr32">  ✓ </span><span class="sgr90">JpegTurbo_jll</span>
<span class="sgr32">  ✓ </span><span class="sgr90">ArrayInterface</span>
<span class="sgr32">  ✓ </span><span class="sgr90">Parameters</span>
<span class="sgr32">  ✓ </span><span class="sgr90">DiffRules</span>
<span class="sgr32">  ✓ </span><span class="sgr90">QOI</span>
<span class="sgr32">  ✓ </span><span class="sgr90">MosaicViews</span>
<span class="sgr32">  ✓ </span><span class="sgr90">OpenEXR_jll</span>
<span class="sgr32">  ✓ </span><span class="sgr90">AxisArrays</span>
<span class="sgr32">  ✓ </span><span class="sgr90">MKL_jll</span>
<span class="sgr32">  ✓ </span><span class="sgr90">libsixel_jll</span>
<span class="sgr32">  ✓ </span><span class="sgr90">ArrayInterface → ArrayInterfaceGPUArraysCoreExt</span>
<span class="sgr32">  ✓ </span><span class="sgr90">ArrayInterface → ArrayInterfaceStaticArraysCoreExt</span>
<span class="sgr32">  ✓ </span><span class="sgr90">OpenEXR</span>
<span class="sgr32">  ✓ </span><span class="sgr90">FiniteDiff</span>
<span class="sgr32">  ✓ </span><span class="sgr90">FiniteDiff → FiniteDiffStaticArraysExt</span>
<span class="sgr32">  ✓ </span><span class="sgr90">ForwardDiff</span>
<span class="sgr32">  ✓ </span><span class="sgr90">ForwardDiff → ForwardDiffStaticArraysExt</span>
<span class="sgr32">  ✓ </span><span class="sgr90">NLSolversBase</span>
<span class="sgr32">  ✓ </span><span class="sgr90">LineSearches</span>
<span class="sgr32">  ✓ </span><span class="sgr90">Optim</span>
<span class="sgr32">  ✓ </span><span class="sgr90">ImageCore</span>
<span class="sgr32">  ✓ </span><span class="sgr90">JpegTurbo</span>
<span class="sgr32">  ✓ </span><span class="sgr90">Sixel</span>
<span class="sgr32">  ✓ </span><span class="sgr90">ImageBase</span>
<span class="sgr32">  ✓ </span><span class="sgr90">PNGFiles</span>
<span class="sgr32">  ✓ </span><span class="sgr90">ImageAxes</span>
<span class="sgr32">  ✓ </span><span class="sgr90">ImageMetadata</span>
<span class="sgr32">  ✓ </span><span class="sgr90">Netpbm</span>
<span class="sgr32">  ✓ </span><span class="sgr90">TiffImages</span>
<span class="sgr33">  ✓ </span>Survey
  46 dependencies successfully precompiled in 61 seconds. 238 already precompiled.
  <span class="sgr33">1</span> dependency precompiled but a different version is currently loaded. Restart julia to access the new version</code></pre><pre><code class="language-julia hljs">]  add Survey</code></pre><h2 id="Tutorial"><a class="docs-heading-anchor" href="#Tutorial">Tutorial</a><a id="Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial" title="Permalink"></a></h2><p>This tutorial assumes basic knowledge of statistics and survey analysis.</p><p>To begin this tutorial, load the package in your workspace:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Survey</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p>Now load a survey dataset that you want to study. In this tutorial we will be using the <a href="https://r-survey.r-forge.r-project.org/survey/html/api.html">Academic Performance Index</a> (API) datasets for Californian schools. The datasets contain information for all schools with at least 100 students and for various probability samples of the data.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; apisrs = load_data(&quot;apisrs&quot;)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">200×40 DataFrame</span>
<span class="sgr1"> Row </span>│<span class="sgr1"> Column1  cds             stype    name             sname               </span> ⋯
     │<span class="sgr90"> Int64    Int64           String1  String15         String              </span> ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │    1039  15739081534155  H        McFarland High   McFarland High       ⋯
   2 │    1124  19642126066716  E        Stowers (Cecil   Stowers (Cecil B.) E
   3 │    2868  30664493030640  H        Brea-Olinda Hig  Brea-Olinda High
   4 │    1273  19644516012744  E        Alameda Element  Alameda Elementary
   5 │    4926  40688096043293  E        Sunnyside Eleme  Sunnyside Elementary ⋯
   6 │    2463  19734456014278  E        Los Molinos Ele  Los Molinos Elementa
   7 │    2031  19647336058200  M        Northridge Midd  Northridge Middle
   8 │    1736  19647336017271  E        Glassell Park E  Glassell Park Elemen
  ⋮  │    ⋮           ⋮            ⋮            ⋮                       ⋮      ⋱
 194 │    4880  39686766042782  E        Tyler Skills El  Tyler Skills Element ⋯
 195 │     993  15636851531987  H        Desert Junior/S  Desert Junior/Senior
 196 │     969  15635291534775  H        North High       North High
 197 │    1752  19647336017446  E        Hammel Street E  Hammel Street Elemen
 198 │    4480  37683386039143  E        Audubon Element  Audubon Elementary   ⋯
 199 │    4062  36678196036222  E        Edison Elementa  Edison Elementary
 200 │    2683  24657716025621  E        Franklin Elemen  Franklin Elementary
<span class="sgr36">                                                 36 columns and 185 rows omitted</span></code></pre><p><code>apisrs</code> is a simple random sample of the Academic Performance Index of Californian schools. The <a href="../api/#Survey.load_data"><code>load_data</code></a> function loads it as a <a href="https://dataframes.juliadata.org/stable/lib/types/#DataFrames.DataFrame"><code>DataFrame</code></a>. You can look at the column names of <code>apisrs</code> to get an idea of what the dataset contains.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; names(apisrs)</code><code class="nohighlight hljs ansi" style="display:block;">40-element Vector{String}:
 &quot;Column1&quot;
 &quot;cds&quot;
 &quot;stype&quot;
 &quot;name&quot;
 &quot;sname&quot;
 &quot;snum&quot;
 &quot;dname&quot;
 &quot;dnum&quot;
 &quot;cname&quot;
 &quot;cnum&quot;
 ⋮
 &quot;col.grad&quot;
 &quot;grad.sch&quot;
 &quot;avg.ed&quot;
 &quot;full&quot;
 &quot;emer&quot;
 &quot;enroll&quot;
 &quot;api.stu&quot;
 &quot;pw&quot;
 &quot;fpc&quot;</code></pre><p>Next, build a survey design from your <code>DataFrame</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; srs = SurveyDesign(apisrs; weights=:pw)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">SurveyDesign:</span>
<span class="sgr1">data: </span>200×45 DataFrame
<span class="sgr1">strata: </span>none
<span class="sgr1">cluster: </span>none
<span class="sgr1">popsize: </span>[6194.0, 6194.0, 6194.0  …  6194.0]
<span class="sgr1">sampsize: </span>[200, 200, 200  …  200]
<span class="sgr1">weights: </span>[30.97, 30.97, 30.97  …  30.97]
<span class="sgr1">allprobs: </span>[0.0323, 0.0323, 0.0323  …  0.0323]</code></pre><p>This is a simple random sample design with weights given by the column <code>:pw</code> of <code>apisrs</code>. You can also create more complex designs such as stratified or cluster sample designs. You can find more information on the complete capabilities of the package in the <a href="../man/dataframes/#manual">Manual</a>. The purpose of this tutorial is to show the basic usage of the package. For that, we will stick with a simple random sample.</p><p>Now you can analyse your design according to your needs using the <a href="../api/#Index">functionality</a> provided by the package. For example, you can compute the estimated mean or population total for a given variable. Let&#39;s say you want to find the mean Academic Performance Index from the year 1999. If you are only interested in the estimated mean, then you can directly pass your design to the <a href="../api/#Statistics.mean"><code>mean</code></a> function:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; mean(:api99, srs)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">1×1 DataFrame</span>
<span class="sgr1"> Row </span>│<span class="sgr1"> mean    </span>
     │<span class="sgr90"> Float64 </span>
─────┼─────────
   1 │ 624.685</code></pre><p>If you also want to know the standard error of the mean, you need to convert the <a href="../api/#Survey.SurveyDesign"><code>SurveyDesign</code></a> to a <a href="../api/#Survey.ReplicateDesign"><code>ReplicateDesign</code></a> using bootstrapping:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; bsrs = bootweights(srs; replicates = 1000)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">ReplicateDesign{BootstrapReplicates}:</span>
<span class="sgr1">data: </span>200×1045 DataFrame
<span class="sgr1">strata: </span>none
<span class="sgr1">cluster: </span>none
<span class="sgr1">popsize: </span>[6194.0, 6194.0, 6194.0  …  6194.0]
<span class="sgr1">sampsize: </span>[200, 200, 200  …  200]
<span class="sgr1">weights: </span>[30.97, 30.97, 30.97  …  30.97]
<span class="sgr1">allprobs: </span>[0.0323, 0.0323, 0.0323  …  0.0323]
<span class="sgr1">type: </span>bootstrap
<span class="sgr1">replicates: </span>1000</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; mean(:api99, bsrs)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">1×2 DataFrame</span>
<span class="sgr1"> Row </span>│<span class="sgr1"> mean     SE      </span>
     │<span class="sgr90"> Float64  Float64 </span>
─────┼──────────────────
   1 │ 624.685  9.84669</code></pre><p>You can find the mean of both the 1999 API and 2000 API for a clear comparison between students&#39; performance from one year to another:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; mean([:api99, :api00], bsrs)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">2×3 DataFrame</span>
<span class="sgr1"> Row </span>│<span class="sgr1"> names   mean     SE      </span>
     │<span class="sgr90"> String  Float64  Float64 </span>
─────┼──────────────────────────
   1 │ api99   624.685  9.84669
   2 │ api00   656.585  9.5409</code></pre><p>The <a href="../api/#Survey.ratio"><code>ratio</code></a> is also appropriate for studying the relationship between the two APIs:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ratio(:api00, :api99, bsrs)</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: MethodError: no method matching ratio(::Symbol, ::Symbol, ::ReplicateDesign{BootstrapReplicates})

Closest candidates are:
  ratio(<span class="sgr91">::Vector{Symbol}</span>, ::Any, ::AbstractSurveyDesign)
<span class="sgr90">   @</span> <span class="sgr35">Survey</span> <span class="sgr90">~/work/Survey.jl/Survey.jl/src/<span class="sgr4">ratio.jl:109</span></span></code></pre><p>If you&#39;re interested in a certain statistic estimated by a specific domain, you can add the domain as the second parameter to your function. Let&#39;s say you want to find the estimated total number of students enrolled in schools from each county:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; total(:enroll, :cname, bsrs)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">38×3 DataFrame</span>
<span class="sgr1"> Row </span>│<span class="sgr1"> total           SE             cname           </span>
     │<span class="sgr90"> Float64         Float64        String          </span>
─────┼────────────────────────────────────────────────
   1 │      1.95823e5  74731.2        Kern
   2 │ 867129.0            1.36622e5  Los Angeles
   3 │      1.68786e5  63858.0        Orange
   4 │   6720.49        6790.49       San Luis Obispo
   5 │  30319.6        18197.6        San Francisco
   6 │   6503.7         6481.36       Modoc
   7 │ 134224.0        46808.0        Alameda
   8 │  64479.5        39542.0        Solano
  ⋮  │       ⋮               ⋮               ⋮
  32 │  32642.4        23541.9        Kings
  33 │  36203.9        32062.1        Shasta
  34 │  12171.2        12502.9        Yolo
  35 │  12976.4        13241.6        Calaveras
  36 │  39239.0        30181.9        Napa
  37 │   6410.79        6986.29       Lake
  38 │  15392.1        15202.2        Merced
<span class="sgr36">                                       23 rows omitted</span></code></pre><p>Another way to visualize data is through graphs. You can make a histogram to better see the distribution of enrolled students:</p><pre><code class="language-julia hljs">julia&gt; hist(srs, :enroll)</code></pre><p>The REPL doesn&#39;t show the plot. To see it, you need to save it locally.</p><pre><code class="language-julia hljs">julia&gt; import AlgebraOfGraphics.save

julia&gt; save(&quot;hist.png&quot;, h)</code></pre><p><img src="../assets/hist.png" alt/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../man/dataframes/">DataFrames in Survey »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 22 December 2023 12:32">Friday 22 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
