<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API reference · Survey.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://xKDR.github.io/Survey.jl/api/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Survey.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting_started/">Getting Started</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../man/dataframes/">DataFrames in Survey</a></li><li><a class="tocitem" href="../man/replicate/">Replicate weights</a></li><li><a class="tocitem" href="../man/plotting/">Plotting</a></li><li><a class="tocitem" href="../man/comparisons/">Comparison with other survey analysis tools</a></li></ul></li><li class="is-active"><a class="tocitem" href>API reference</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/xKDR/Survey.jl/blob/main/docs/src/api.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#Survey.AbstractSurveyDesign"><code>Survey.AbstractSurveyDesign</code></a></li><li><a href="#Survey.ReplicateDesign"><code>Survey.ReplicateDesign</code></a></li><li><a href="#Survey.SurveyDesign"><code>Survey.SurveyDesign</code></a></li><li><a href="#Statistics.mean"><code>Statistics.mean</code></a></li><li><a href="#Statistics.quantile"><code>Statistics.quantile</code></a></li><li><a href="#Survey.bootweights"><code>Survey.bootweights</code></a></li><li><a href="#Survey.boxplot"><code>Survey.boxplot</code></a></li><li><a href="#Survey.hist"><code>Survey.hist</code></a></li><li><a href="#Survey.load_data"><code>Survey.load_data</code></a></li><li><a href="#Survey.plot"><code>Survey.plot</code></a></li><li><a href="#Survey.ratio"><code>Survey.ratio</code></a></li><li><a href="#Survey.total"><code>Survey.total</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="Survey.AbstractSurveyDesign" href="#Survey.AbstractSurveyDesign"><code>Survey.AbstractSurveyDesign</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractSurveyDesign</code></pre><p>Supertype for every survey design type. </p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The data passed to a survey constructor is modified. To avoid this pass a copy of the data instead of the original.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/SurveyDesign.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Survey.SurveyDesign" href="#Survey.SurveyDesign"><code>Survey.SurveyDesign</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SurveyDesign &lt;: AbstractSurveyDesign</code></pre><p>General survey design encompassing a simple random, stratified, cluster or multi-stage design.</p><p>In the case of cluster sample, the clusters are chosen by simple random sampling. All individuals in one cluster are sampled. The clusters are considered disjoint and nested.</p><p><code>strata</code> and <code>clusters</code> must be given as columns in <code>data</code>.</p><p><strong>Arguments:</strong></p><ul><li><code>data::AbstractDataFrame</code>: the survey dataset (!this gets modified by the constructor).</li><li><code>strata::Union{Nothing, Symbol}=nothing</code>: the stratification variable.</li><li><code>clusters::Union{Nothing, Symbol, Vector{Symbol}}=nothing</code>: the clustering variable.</li><li><code>weights::Union{Nothing, Symbol}=nothing</code>: the sampling weights.</li><li><code>popsize::Union{Nothing, Symbol}=nothing</code>: the (expected) survey population size.</li></ul><pre><code class="language-julia-repl hljs">julia&gt; apiclus1 = load_data(&quot;apiclus1&quot;);

julia&gt; dclus1 = SurveyDesign(apiclus1; clusters=:dnum, strata=:stype, weights=:pw)
SurveyDesign:
data: 183×43 DataFrame
strata: stype
    [H, E, E  …  E]
cluster: dnum
    [637, 637, 637  …  448]
popsize: [507.7049, 507.7049, 507.7049  …  507.7049]
sampsize: [15, 15, 15  …  15]
weights: [33.847, 33.847, 33.847  …  33.847]
allprobs: [0.0295, 0.0295, 0.0295  …  0.0295]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/SurveyDesign.jl#L13-L45">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Survey.ReplicateDesign" href="#Survey.ReplicateDesign"><code>Survey.ReplicateDesign</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ReplicateDesign &lt;: AbstractSurveyDesign</code></pre><p>Survey design obtained by replicating an original design using <a href="#Survey.bootweights"><code>bootweights</code></a>.</p><pre><code class="language-julia-repl hljs">julia&gt; apistrat = load_data(&quot;apistrat&quot;);

julia&gt; strat = SurveyDesign(apistrat; strata=:stype, weights=:pw);

julia&gt; bootstrat = bootweights(strat; replicates=1000)
ReplicateDesign:
data: 200×1044 DataFrame
strata: stype
    [E, E, E  …  H]
cluster: none
popsize: [4420.9999, 4420.9999, 4420.9999  …  755.0]
sampsize: [100, 100, 100  …  50]
weights: [44.21, 44.21, 44.21  …  15.1]
allprobs: [0.0226, 0.0226, 0.0226  …  0.0662]
replicates: 1000</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/SurveyDesign.jl#L110-L132">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Survey.load_data" href="#Survey.load_data"><code>Survey.load_data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_data(name)</code></pre><p>Load a sample dataset as a <code>DataFrame</code>.</p><p>All available datasets can be found <a href="https://github.com/xKDR/Survey.jl/tree/main/assets">here</a>.</p><pre><code class="language-julia-repl hljs">julia&gt; apisrs = load_data(&quot;apisrs&quot;)
200×40 DataFrame
 Row │ Column1  cds             stype    name             sname                ⋯
     │ Int64    Int64           String1  String15         String               ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │    1039  15739081534155  H        McFarland High   McFarland High       ⋯
   2 │    1124  19642126066716  E        Stowers (Cecil   Stowers (Cecil B.) E
   3 │    2868  30664493030640  H        Brea-Olinda Hig  Brea-Olinda High
   4 │    1273  19644516012744  E        Alameda Element  Alameda Elementary
   5 │    4926  40688096043293  E        Sunnyside Eleme  Sunnyside Elementary ⋯
   6 │    2463  19734456014278  E        Los Molinos Ele  Los Molinos Elementa
   7 │    2031  19647336058200  M        Northridge Midd  Northridge Middle
   8 │    1736  19647336017271  E        Glassell Park E  Glassell Park Elemen
  ⋮  │    ⋮           ⋮            ⋮            ⋮                       ⋮      ⋱
 194 │    4880  39686766042782  E        Tyler Skills El  Tyler Skills Element ⋯
 195 │     993  15636851531987  H        Desert Junior/S  Desert Junior/Senior
 196 │     969  15635291534775  H        North High       North High
 197 │    1752  19647336017446  E        Hammel Street E  Hammel Street Elemen
 198 │    4480  37683386039143  E        Audubon Element  Audubon Elementary   ⋯
 199 │    4062  36678196036222  E        Edison Elementa  Edison Elementary
 200 │    2683  24657716025621  E        Franklin Elemen  Franklin Elementary
                                                 36 columns and 185 rows omitted</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/load_data.jl#L4-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Survey.bootweights" href="#Survey.bootweights"><code>Survey.bootweights</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia-repl hljs">julia&gt; using Random

julia&gt; apiclus1 = load_data(&quot;apiclus1&quot;);

julia&gt; clus_one_stage = SurveyDesign(apiclus1; clusters = :dnum, popsize=:fpc);

julia&gt; bootweights(clus_one_stage; replicates=1000, rng=MersenneTwister(111)) # choose a seed for deterministic results
ReplicateDesign:
data: 183×1044 DataFrame
strata: none
cluster: dnum
    [61, 61, 61  …  815]
popsize: [757, 757, 757  …  757]
sampsize: [15, 15, 15  …  15]
weights: [50.4667, 50.4667, 50.4667  …  50.4667]
allprobs: [0.0198, 0.0198, 0.0198  …  0.0198]
replicates: 1000</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/bootstrap.jl#L1-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Statistics.mean" href="#Statistics.mean"><code>Statistics.mean</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">mean(var, design)</code></pre><p>Estimate the mean of a variable.</p><pre><code class="language-julia-repl hljs">julia&gt; apiclus1 = load_data(&quot;apiclus1&quot;);

julia&gt; clus_one_stage = SurveyDesign(apiclus1; clusters = :dnum, weights = :pw)
SurveyDesign:
data: 183×44 DataFrame
strata: none
cluster: dnum
    [637, 637, 637  …  448]
popsize: [507.7049, 507.7049, 507.7049  …  507.7049]
sampsize: [15, 15, 15  …  15]
weights: [33.847, 33.847, 33.847  …  33.847]
allprobs: [0.0295, 0.0295, 0.0295  …  0.0295]

julia&gt; mean(:api00, clus_one_stage)
1×1 DataFrame
 Row │ mean
     │ Float64
─────┼─────────
   1 │ 644.169 </code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/mean.jl#L1-L27">source</a></section><section><div><p>Use replicate weights to compute the standard error of the estimated mean. </p><pre><code class="language-julia-repl hljs">julia&gt; clus_one_stage_boot = clus_one_stage |&gt; bootweights;

julia&gt; mean(:api00, clus_one_stage_boot)
1×2 DataFrame
 Row │ mean     SE
     │ Float64  Float64
─────┼──────────────────
   1 │ 644.169  23.4107</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/mean.jl#L33-L47">source</a></section><section><div><p>Estimate the mean of a list of variables.</p><pre><code class="language-julia-repl hljs">julia&gt; mean([:api00, :enroll], clus_one_stage)
2×2 DataFrame
 Row │ names   mean
     │ String  Float64
─────┼─────────────────
   1 │ api00   644.169
   2 │ enroll  549.716</code></pre><p>Use replicate weights to compute the standard error of the estimated means. </p><pre><code class="language-julia-repl hljs">julia&gt; mean([:api00, :enroll], clus_one_stage_boot)
2×3 DataFrame
 Row │ names   mean     SE
     │ String  Float64  Float64
─────┼──────────────────────────
   1 │ api00   644.169  23.4107
   2 │ enroll  549.716  45.7835 </code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/mean.jl#L55-L79">source</a></section><section><div><pre><code class="nohighlight hljs">mean(var, domain, design)</code></pre><p>Estimate means of domains.</p><pre><code class="language-julia-repl hljs">julia&gt; mean(:api00, :cname, clus_one_stage)
11×2 DataFrame
 Row │ cname        mean
     │ String15     Float64
─────┼──────────────────────
   1 │ Alameda      669.0
   2 │ Fresno       472.0
   3 │ Kern         452.5
   4 │ Los Angeles  647.267
   5 │ Mendocino    623.25
   6 │ Merced       519.25
   7 │ Orange       710.563
   8 │ Plumas       709.556
   9 │ San Diego    659.436
  10 │ San Joaquin  551.189
  11 │ Santa Clara  732.077 </code></pre><p>Use the replicate design to compute standard errors of the estimated means. </p><pre><code class="language-julia-repl hljs">julia&gt; mean(:api00, :cname, clus_one_stage_boot)
11×3 DataFrame
 Row │ cname        mean     SE
     │ String15     Float64  Float64
─────┼────────────────────────────────────
   1 │ Santa Clara  732.077  58.2169
   2 │ San Diego    659.436   2.66703
   3 │ Merced       519.25    2.28936e-15
   4 │ Los Angeles  647.267  47.6233
   5 │ Orange       710.563   2.19826e-13
   6 │ Fresno       472.0     1.13687e-13
   7 │ Plumas       709.556   1.26058e-13
   8 │ Alameda      669.0     1.27527e-13
   9 │ San Joaquin  551.189   2.1791e-13
  10 │ Kern         452.5     0.0
  11 │ Mendocino    623.25    1.09545e-13</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/mean.jl#L86-L129">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Survey.total" href="#Survey.total"><code>Survey.total</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">total(var, design)</code></pre><p>Estimate the population total of variable.</p><pre><code class="language-julia-repl hljs">julia&gt; apiclus1 = load_data(&quot;apiclus1&quot;);

julia&gt; clus_one_stage = SurveyDesign(apiclus1; clusters = :dnum, weights = :pw);

julia&gt; total(:api00, clus_one_stage)
1×1 DataFrame
 Row │ total
     │ Float64
─────┼───────────
   1 │ 3.98999e6</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/total.jl#L1-L18">source</a></section><section><div><p>Use replicate weights to compute the standard error of the estimated total. </p><pre><code class="language-julia-repl hljs">julia&gt; clus_one_stage_boot = clus_one_stage |&gt; bootweights;

julia&gt; total(:api00, clus_one_stage_boot)
1×2 DataFrame
 Row │ total      SE
     │ Float64    Float64
─────┼──────────────────────
   1 │ 3.98999e6  9.01611e5</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/total.jl#L24-L37">source</a></section><section><div><p>Estimate the population total of a list of variables.</p><pre><code class="language-julia-repl hljs">julia&gt; total([:api00, :enroll], clus_one_stage)
2×2 DataFrame
 Row │ names   total
     │ String  Float64
─────┼───────────────────
   1 │ api00   3.98999e6
   2 │ enroll  3.40494e6</code></pre><p>Use replicate weights to compute the standard error of the estimated means. </p><pre><code class="language-julia-repl hljs">julia&gt; total([:api00, :enroll], clus_one_stage_boot)
2×3 DataFrame
 Row │ names   total      SE
     │ String  Float64    Float64
─────┼──────────────────────────────
   1 │ api00   3.98999e6  9.01611e5
   2 │ enroll  3.40494e6  9.33396e5 </code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/total.jl#L45-L69">source</a></section><section><div><pre><code class="nohighlight hljs">total(var, domain, design)</code></pre><p>Estimate population totals of domains.</p><pre><code class="language-julia-repl hljs">julia&gt; total(:api00, :cname, clus_one_stage)
11×2 DataFrame
 Row │ cname        total
     │ String15     Float64
─────┼─────────────────────────────
   1 │ Alameda      249080.0
   2 │ Fresno        63903.1
   3 │ Kern          30631.5
   4 │ Los Angeles       3.2862e5
   5 │ Mendocino     84380.6
   6 │ Merced        70300.2
   7 │ Orange            3.84807e5
   8 │ Plumas            2.16147e5
   9 │ San Diego         1.2276e6
  10 │ San Joaquin       6.90276e5
  11 │ Santa Clara       6.44244e5 </code></pre><p>Use the replicate design to compute standard errors of the estimated totals. </p><pre><code class="language-julia-repl hljs">julia&gt; total(:api00, :cname, clus_one_stage_boot)
11×3 DataFrame
 Row │ cname        total           SE
     │ String15     Float64         Float64
─────┼────────────────────────────────────────────
   1 │ Santa Clara       6.44244e5      4.2273e5
   2 │ San Diego         1.2276e6       8.62727e5
   3 │ Merced        70300.2        71336.3
   4 │ Los Angeles       3.2862e5       2.93936e5
   5 │ Orange            3.84807e5      3.88014e5
   6 │ Fresno        63903.1        64781.7
   7 │ Plumas            2.16147e5      2.12089e5
   8 │ Alameda      249080.0            2.49228e5
   9 │ San Joaquin       6.90276e5      6.81604e5
  10 │ Kern          30631.5        30870.3
  11 │ Mendocino     84380.6        80215.9</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/total.jl#L76-L119">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Statistics.quantile" href="#Statistics.quantile"><code>Statistics.quantile</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">quantile(var, design, p; kwargs...)</code></pre><p>Estimate quantile of a variable.</p><p>Hyndman and Fan compiled a taxonomy of nine algorithms to estimate quantiles. These are implemented in Statistics.quantile, which this function calls. Julia, R and Python-numpy use the same defaults</p><p><strong>References:</strong></p><ul><li>Hyndman, R.J and Fan, Y. (1996) <a href="https://www.amherst.edu/media/view/129116/original/Sample+Quantiles.pdf">&quot;Sample Quantiles in Statistical Packages&quot;</a>, The American Statistician, Vol. 50, No. 4, pp. 361-365.</li><li><a href="https://en.m.wikipedia.org/wiki/Quantile">Quantiles</a> on wikipedia</li><li><a href="https://r-survey.r-forge.r-project.org/svybook/">Complex Surveys: a guide to analysis using R</a>, Section 2.4.1 and Appendix C.4.</li></ul><pre><code class="language-julia-repl hljs">julia&gt; apisrs = load_data(&quot;apisrs&quot;);

julia&gt; srs = SurveyDesign(apisrs; weights=:pw); 

julia&gt; quantile(:api00, srs, 0.5)
1×1 DataFrame
 Row │ 0.5th percentile
     │ Float64
─────┼──────────────────
   1 │            659.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/quantile.jl#L1-L25">source</a></section><section><div><p>Use replicate weights to compute the standard error of the estimated quantile. </p><pre><code class="language-julia-repl hljs">julia&gt; srs_boot = srs |&gt; bootweights; 

julia&gt; quantile(:api00, srs_boot, 0.5)
1×2 DataFrame
 Row │ 0.5th percentile  SE
     │ Float64           Float64
─────┼───────────────────────────
   1 │            659.0  14.9764</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/quantile.jl#L35-L48">source</a></section><section><div><pre><code class="nohighlight hljs">quantile(var, design, p; kwargs...)</code></pre><p>Estimate quantiles of a list of variables.</p><pre><code class="language-julia-repl hljs">julia&gt; quantile(:enroll, srs, [0.1,0.2,0.5,0.75,0.95])
5×2 DataFrame
 Row │ percentile  statistic
     │ String      Float64
─────┼───────────────────────
   1 │ 0.1             245.5
   2 │ 0.2             317.6
   3 │ 0.5             453.0
   4 │ 0.75            668.5
   5 │ 0.95           1473.1</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/quantile.jl#L60-L76">source</a></section><section><div><p>Use replicate weights to compute the standard errors of the estimated quantiles. </p><pre><code class="language-julia-repl hljs">julia&gt; quantile(:enroll, srs_boot, [0.1,0.2,0.5,0.75,0.95])
5×3 DataFrame
 Row │ percentile  statistic  SE       
     │ String      Float64    Float64  
─────┼─────────────────────────────────
   1 │ 0.1             245.5   20.2964
   2 │ 0.2             317.6   13.5435
   3 │ 0.5             453.0   24.9719
   4 │ 0.75            668.5   34.2487
   5 │ 0.95           1473.1  142.568</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/quantile.jl#L83-L99">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Survey.ratio" href="#Survey.ratio"><code>Survey.ratio</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ratio(numerator, denominator, design)</code></pre><p>Estimate the ratio of the columns specified in numerator and denominator.</p><pre><code class="language-julia-repl hljs">julia&gt; apiclus1 = load_data(&quot;apiclus1&quot;);

julia&gt; clus_one_stage = SurveyDesign(apiclus1; clusters = :dnum, weights = :pw);

julia&gt; ratio(:api00, :enroll, clus_one_stage)
1×1 DataFrame
 Row │ ratio
     │ Float64
─────┼─────────
   1 │ 1.17182
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/ratio.jl#L1-L19">source</a></section><section><div><p>Use replicate weights to compute the standard error of the ratio.</p><pre><code class="language-julia-repl hljs">julia&gt; ratio(:api00, :enroll, clus_one_stage)
1×1 DataFrame
 Row │ ratio
     │ Float64
─────┼─────────
   1 │ 1.17182
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/ratio.jl#L25-L37">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Survey.plot" href="#Survey.plot"><code>Survey.plot</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plot(design, x, y; kwargs...)</code></pre><p>Scatter plot of survey design variables <code>x</code> and <code>y</code>.</p><p>The plot takes into account the frequency weights specified by the user in the design.</p><pre><code class="language-julia hljs">julia&gt; using AlgebraOfGraphics

julia&gt; apisrs = load_data(&quot;apisrs&quot;);

julia&gt; srs = SurveyDesign(apisrs; weights=:pw);

julia&gt; s = plot(srs, :api99, :api00);

julia&gt; save(&quot;scatter.png&quot;, s)</code></pre><p><img src="../assets/scatter.png" alt/></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/plot.jl#L1-L22">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Survey.boxplot" href="#Survey.boxplot"><code>Survey.boxplot</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">boxplot(design, x, y; kwargs...)</code></pre><p>Box plot of survey design variable <code>y</code> grouped by column <code>x</code>.</p><p>Weights can be specified by a <code>Symbol</code> using the keyword argument <code>weights</code>.</p><p>The keyword arguments are all the arguments that can be passed to <code>mapping</code> in <a href="https://docs.juliahub.com/AlgebraOfGraphics/CHIaw/0.4.7/">AlgebraOfGraphics</a>.</p><pre><code class="language-julia hljs">julia&gt; using AlgebraOfGraphics

julia&gt; apisrs = load_data(&quot;apisrs&quot;);

julia&gt; srs = SurveyDesign(apisrs; weights=:pw);

julia&gt; bp = boxplot(srs, :stype, :enroll; weights = :pw);

julia&gt; save(&quot;boxplot.png&quot;, bp)</code></pre><p><img src="../assets/boxplot.png" alt/></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/boxplot.jl#L1-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Survey.hist" href="#Survey.hist"><code>Survey.hist</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">hist(design, var, bins = freedman_diaconis; normalization = :density, kwargs...)</code></pre><p>Histogram plot of a survey design variable given by <code>var</code>.</p><p><code>bins</code> can be an <code>Integer</code> specifying the number of equal-width bins, an <code>AbstractVector</code> specifying the bins intervals, or a <code>Function</code> specifying the function used for calculating the number of bins. The possible functions are <code>sturges</code> and <code>freedman_diaconis</code>.</p><p>The normalization can be set to <code>:none</code>, <code>:density</code>, <code>:probability</code> or <code>:pdf</code>. See <a href="https://docs.juliahub.com/AlgebraOfGraphics/CHIaw/0.4.9/generated/datatransformations/#AlgebraOfGraphics.histogram">AlgebraOfGraphics.histogram</a> for more information.</p><p>For the complete argument list see <a href="https://makie.juliaplots.org/stable/examples/plotting_functions/hist/">Makie.hist</a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The <code>weights</code> argument should be a <code>Symbol</code> specifying a design variable.</p></div></div><pre><code class="language-julia hljs">julia&gt; using AlgebraOfGraphics

julia&gt; apisrs = load_data(&quot;apisrs&quot;);

julia&gt; srs = SurveyDesign(apisrs; weights=:pw);

julia&gt; h = hist(srs, :enroll);

julia&gt; save(&quot;hist.png&quot;, h)</code></pre><p><img src="../assets/hist.png" alt/></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/xKDR/Survey.jl/blob/351f06fc6a6d1cd350bae598ef7b4414b5d01188/src/hist.jl#L42-L75">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../man/comparisons/">« Comparison with other survey analysis tools</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 2 February 2023 04:48">Thursday 2 February 2023</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
